-- Drop existing databases if they exist
DROP DATABASE IF EXISTS pokemon_trading;
DROP DATABASE IF EXISTS pokemon_auth;

-- Create pokemon_auth database for user authentication
CREATE DATABASE pokemon_auth;
USE pokemon_auth;

-- Create Users table with role and pokecoins
CREATE TABLE Users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    role ENUM('admin', 'player') DEFAULT 'player',
    pokecoins INT DEFAULT 1000,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Insert default admin account (username: admin, password: admin123)
INSERT INTO Users (username, password, role, pokecoins) VALUES ('admin', 'admin123', 'admin', 999999);

-- Create pokemon_trading database for pokemon cards
CREATE DATABASE pokemon_trading;
USE pokemon_trading;

-- Create PokemonCards table with price column
CREATE TABLE PokemonCards (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    image_url VARCHAR(255) NOT NULL,
    health INT NOT NULL,
    power INT NOT NULL,
    type VARCHAR(50) NOT NULL,
    price INT NOT NULL DEFAULT 100,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Create UserPokemonCards table to track which users own which cards
CREATE TABLE UserPokemonCards (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    card_id INT NOT NULL,
    purchased_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (card_id) REFERENCES PokemonCards(id) ON DELETE CASCADE
);

-- Create UserDecks table to manage user decks with 6 slots
CREATE TABLE UserDecks (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL UNIQUE,
    slot1_card_id INT NULL,
    slot2_card_id INT NULL,
    slot3_card_id INT NULL,
    slot4_card_id INT NULL,
    slot5_card_id INT NULL,
    slot6_card_id INT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES pokemon_auth.Users(id) ON DELETE CASCADE,
    FOREIGN KEY (slot1_card_id) REFERENCES UserPokemonCards(id) ON DELETE SET NULL,
    FOREIGN KEY (slot2_card_id) REFERENCES UserPokemonCards(id) ON DELETE SET NULL,
    FOREIGN KEY (slot3_card_id) REFERENCES UserPokemonCards(id) ON DELETE SET NULL,
    FOREIGN KEY (slot4_card_id) REFERENCES UserPokemonCards(id) ON DELETE SET NULL,
    FOREIGN KEY (slot5_card_id) REFERENCES UserPokemonCards(id) ON DELETE SET NULL,
    FOREIGN KEY (slot6_card_id) REFERENCES UserPokemonCards(id) ON DELETE SET NULL
);

-- Insert Pokemon cards with prices based on their stats
INSERT INTO PokemonCards (name, image_url, health, power, type, price) VALUES
    ("Abomasnow", "abomasnow.png", 82, 87, 'Grass', 170),
    ("Bellossom", "bellossom.png", 95, 100, 'Grass', 195),
    ("Breloom", "breloom.png", 68, 73, 'Grass', 140),
    ("Cacturne", "cacturne.png", 77, 87, 'Grass', 165),
    ("Carnivine", "carnivine.png", 65, 75, 'Grass', 140),
    ("Celebi", "celebi.png", 91, 101, 'Grass', 195),
    ("Cradily", "cradily.png", 74, 84, 'Grass', 160),
    ("Exeggutor", "exeggutor.png", 66, 76, 'Grass', 145),
    ("Hoppip", "hoppip.png", 80, 90, 'Grass', 170),
    ("Jumpluff", "jumpluff.png", 87, 97, 'Grass', 185),
    ("Ludicolo", "ludicolo.png", 64, 69, 'Grass', 135),
    ("Meganium", "meganium.png", 78, 88, 'Grass', 165),
    ("Parasect", "parasect.png", 72, 77, 'Grass', 150),
    ("Roserade", "roserade.png", 89, 99, 'Grass', 190),
    ("Sceptile", "sceptile.png", 70, 80, 'Grass', 150),
    ("Shiftry", "shiftry.png", 83, 88, 'Grass', 170),
    ("Skiploom", "skiploom.png", 92, 102, 'Grass', 195),
    ("Sunflora", "sunflora.png", 67, 77, 'Grass', 145),
    ("Tangela", "tangela.png", 79, 89, 'Grass', 170),
    ("Whimsicott", "whimsicott.png", 94, 99, 'Grass', 195),
    ("Torterra", "torterra.png", 88, 93, 'Grass', 180),
    ("Tropius", "tropius.png", 63, 73, 'Grass', 135),
    ("Venusaur", "venusaur-mega.png", 76, 86, 'Grass', 160),
    ("Victreebel", "victreebel.png", 96, 101, 'Grass', 200),
    ("Vileplume", "vileplume.png", 90, 110, 'Grass', 200),
    ("Articuno", "articuno.png", 82, 87, 'Ice', 170),
    ("Glalie", "glalie.png", 54, 64, 'Ice', 120),
    ("Froslass", "froslass.png", 73, 83, 'Ice', 155),
    ("Regice", "regice.png", 91, 96, 'Ice', 190),
    ("Aurorus", "aurorus.png", 68, 78, 'Ice', 145),
    ("Cryogonal", "cryogonal.png", 88, 93, 'Ice', 180),
    ("Avalugg", "avalugg.png", 77, 87, 'Ice', 165),
    ("Beartic", "beartic.png", 95, 105, 'Ice', 200),
    ("Weavile", "weavile.png", 72, 77, 'Ice', 150),
    ("Glastrier", "glastrier.png", 85, 95, 'Ice', 180),
    ("Vanilluxe", "vanilluxe.png", 63, 73, 'Ice', 135),
    ("Mamoswine", "mamoswine.png", 80, 90, 'Ice', 170),
    ("Lapras", "lapras.png", 70, 80, 'Ice', 150),
    ("Walrein", "walrein.png", 94, 99, 'Ice', 195),
    ("Delibird", "delibird.png", 56, 61, 'Ice', 115),
    ("Jynx", "jynx.png", 75, 80, 'Ice', 155),
    ("Abomasnow", "abomasnow.png", 87, 97, 'Ice', 185),
    ("Cetitan", "cetitan.png", 90, 95, 'Ice', 185),
    ("Arctovish", "arctovish.png", 67, 72, 'Ice', 140),
    ("Arctozolt", "arctozolt.png", 78, 83, 'Ice', 160),
    ("Mr. Rime", "mr_rime.png", 81, 86, 'Ice', 165),
    ("Eiscue", "eiscue.png", 92, 97, 'Ice', 190),
    ("Baxcalibur", "baxcalibur.png", 66, 76, 'Ice', 145),
    ("Cloyster", "cloyster.png", 98, 108, 'Ice', 205),
    ("Glaceon", "glaceon.png", 60, 70, 'Ice', 130),
    ("Electivire", "electivire.png", 84, 94, 'Electric', 180),
    ("Jolteon", "jolteon.png", 73, 78, 'Electric', 150),
    ("Manectric", "manectric.png", 79, 89, 'Electric', 170),
    ("Eelektross", "eelektross.png", 92, 97, 'Electric', 190),
    ("Ampharos", "ampharos.png", 88, 98, 'Electric', 185),
    ("Magnezone", "magnezone.png", 81, 91, 'Electric', 170),
    ("Heliolisk", "heliolisk.png", 77, 87, 'Electric', 165),
    ("Rotom", "rotom.png", 90, 95, 'Electric', 185),
    ("Luxray", "luxray.png", 85, 90, 'Electric', 175),
    ("Zebstrika", "zebstrika.png", 80, 90, 'Electric', 170),
    ("Pincurchin", "pincurchin.png", 76, 81, 'Electric', 155),
    ("Togedemaru", "togedemaru.png", 70, 80, 'Electric', 150),
    ("Toxtricity", "toxtricity.png", 87, 92, 'Electric', 180),
    ("Boltund", "boltund.png", 74, 79, 'Electric', 155),
    ("Flaaffy", "flaaffy.png", 72, 77, 'Electric', 150),
    ("Electrode", "electrode.png", 95, 100, 'Electric', 195),
    ("Raichu", "raichu.png", 83, 88, 'Electric', 170),
    ("Vikavolt", "vikavolt.png", 93, 103, 'Electric', 195),
    ("Plusle", "plusle.png", 71, 81, 'Electric', 150),
    ("Minun", "minun.png", 75, 80, 'Electric', 155),
    ("Tapu Koko", "tapu_koko.png", 94, 99, 'Electric', 195),
    ("Xurkitree", "xurkitree.png", 91, 101, 'Electric', 195),
    ("Pikachu", "pikachu.png", 78, 83, 'Electric', 160),
    ("Pichu", "pichu.png", 89, 99, 'Electric', 190),
    ("Pawmot", "pawmot.png", 97, 102, 'Electric', 200),
    ("Tyranitar", "tyranitar.png", 110, 120, 'Dark', 230),
    ("Absol", "absol.png", 92, 99, 'Dark', 190),
    ("Umbreon", "umbreon.png", 84, 91, 'Dark', 175),
    ("Hydreigon", "hydreigon.png", 100, 110, 'Dark', 210),
    ("Weavile", "weavile.png", 88, 96, 'Dark', 185),
    ("Bisharp", "bisharp.png", 85, 95, 'Dark', 180),
    ("Zoroark", "zoroark.png", 97, 107, 'Dark', 205),
    ("Honchkrow", "honchkrow.png", 102, 112, 'Dark', 215),
    ("Krookodile", "krookodile.png", 90, 95, 'Dark', 185),
    ("Drapion", "drapion.png", 81, 91, 'Dark', 170),
    ("Grimmsnarl", "grimmsnarl.png", 93, 103, 'Dark', 195),
    ("Malamar", "malamar.png", 89, 96, 'Dark', 185),
    ("Pangoro", "pangoro.png", 108, 118, 'Dark', 225),
    ("Mandibuzz", "mandibuzz.png", 80, 87, 'Dark', 165),
    ("Thievul", "thievul.png", 86, 91, 'Dark', 175),
    ("Mightyena", "mightyena.png", 83, 86, 'Dark', 170),
    ("Obstagoon", "obstagoon.png", 95, 100, 'Dark', 195),
    ("Houndoom", "houndoom.png", 98, 105, 'Dark', 205),
    ("Morpeko", "morpeko.png", 91, 94, 'Dark', 185),
    ("Yveltal", "yveltal.png", 111, 121, 'Dark', 235),
    ("Zarude", "zarude.png", 96, 101, 'Dark', 195),
    ("Darkrai", "darkrai.png", 109, 112, 'Dark', 220),
    ("Skuntank", "skuntank.png", 82, 89, 'Dark', 170),
    ("Guzzlord", "guzzlord.png", 104, 114, 'Dark', 220),
    ("Poochyena", "poochyena.png", 87, 90, 'Dark', 175),
    ('Blastoise', 'blastoise.png', 105, 115, 'Water', 220),
    ('Alakazam', 'alakazam.png', 95, 120, 'Psychic', 215),
    ('Espeon', 'espeon.png', 70, 110, 'Psychic', 180),
    ('Metagross', 'metagross.png', 120, 80, 'Psychic', 200),
    ('Gardevoir', 'gardevoir.png', 80, 115, 'Psychic', 195),
    ('Gallade', 'gallade.png', 68, 125, 'Psychic', 195),
    ('Starmie', 'starmie.png', 100, 80, 'Psychic', 180),
    ('Bronzong', 'bronzong.png', 67, 89, 'Psychic', 155),
    ('Medicham', 'medicham.png', 60, 85, 'Psychic', 145),
    ('Reuniclus', 'reuniclus.png', 110, 65, 'Psychic', 175),
    ('Slowbro', 'slowbro.png', 95, 75, 'Psychic', 170),
    ('Meowstic', 'meowstic.png', 74, 83, 'Psychic', 155),
    ('Gothitelle', 'gothitelle.png', 70, 95, 'Psychic', 165),
    ('Beheeyem', 'beheeyem.png', 75, 125, 'Psychic', 200),
    ('Malamar', 'malamar.png', 86, 92, 'Psychic', 180),
    ('Claydol', 'claydol.png', 80, 70, 'Psychic', 150),
    ('Hypno', 'hypno.png', 85, 73, 'Psychic', 160),
    ('Oranguru', 'oranguru.png', 90, 60, 'Psychic', 150),
    ('Xatu', 'xatu.png', 65, 75, 'Psychic', 140),
    ('Sigilyph', 'sigilyph.png', 72, 87, 'Psychic', 160),
    ('Exeggutor', 'exeggutor.png', 95, 105, 'Psychic', 200),
    ('Kadabra', 'kadabra.png', 65, 90, 'Psychic', 155),
    ('Kirlia', 'kirlia.png', 65, 50, 'Psychic', 115),
    ('Duosion', 'duosion.png', 70, 55, 'Psychic', 125),
    ('Baltoy', 'baltoy.png', 60, 40, 'Psychic', 100),
    ('Ralts', 'ralts.png', 45, 35, 'Psychic', 80),
    ('Blastoise', 'blastoise.png', 85, 100, 'Water', 185),
    ('Wartortle', 'wartortle.png', 59, 63, 'Water', 120),
    ('Gyarados', 'gyarados.png', 95, 125, 'Water', 220),
    ('Magikarp', 'magikarp.png', 20, 10, 'Water', 30),
    ('Vaporeon', 'vaporeon.png', 130, 65, 'Water', 195),
    ('Marill', 'marill.png', 70, 20, 'Water', 90),
    ('Azumarill', 'azumarill.png', 100, 50, 'Water', 150),
    ('Poliwag', 'poliwag.png', 40, 50, 'Water', 90),
    ('Poliwhirl', 'poliwhirl.png', 65, 65, 'Water', 130),
    ('Tentacool', 'tentacool.png', 40, 40, 'Water', 80),
    ('Tentacruel', 'tentacruel.png', 80, 70, 'Water', 150),
    ('Goldeen', 'goldeen.png', 45, 67, 'Water', 110),
    ('Seaking', 'seaking.png', 80, 92, 'Water', 170),
    ('Horsea', 'horsea.png', 30, 70, 'Water', 100),
    ('Kingdra', 'kingdra.png', 75, 95, 'Water', 170),
    ('Shellder', 'shellder.png', 30, 65, 'Water', 95),
    ('Cloyster', 'cloyster.png', 50, 95, 'Water', 145),
    ('Slowpoke', 'slowpoke.png', 90, 65, 'Water', 155),
    ('Slowbro', 'slowbro.png', 95, 75, 'Water', 170),
    ('Staryu', 'staryu.png', 30, 70, 'Water', 100),
    ('Starmie', 'starmie.png', 60, 75, 'Water', 135),
    ('Mantine', 'mantine.png', 65, 40, 'Water', 105),
    ('Mantyke', 'mantyke.png', 45, 20, 'Water', 65),
    ('Lanturn', 'lanturn.png', 125, 58, 'Water', 180),
    ('Chinchou', 'chinchou.png', 75, 38, 'Water', 115),
    ('Arcanine', 'arcanine.png', 115, 125, 'Fire', 240),
    ('Charizard', 'charizard.png', 110, 120, 'Fire', 230),
    ('Blaziken', 'blaziken.png', 95, 125, 'Fire', 220),
    ('Typhlosion', 'typhlosion.png', 100, 115, 'Fire', 215),
    ('Flareon', 'flareon.png', 85, 130, 'Fire', 215),
    ('Magmar', 'magmar.png', 90, 110, 'Fire', 200),
    ('Torkoal', 'torkoal.png', 130, 90, 'Fire', 220),
    ('Houndoom', 'houndoom.png', 95, 125, 'Fire', 220),
    ('Rapidash', 'rapidash.png', 105, 110, 'Fire', 215),
    ('Camerupt', 'camerupt.png', 120, 115, 'Fire', 235),
    ('Magmortar', 'magmortar.png', 100, 135, 'Fire', 235),
    ('Ninetales', 'ninetales.png', 90, 115, 'Fire', 205),
    ('Salazzle', 'salazzle.png', 75, 120, 'Fire', 195),
    ('Heatmor', 'heatmor.png', 80, 105, 'Fire', 185),
    ('Infernape', 'infernape.png', 85, 125, 'Fire', 210),
    ('Cinderace', 'cinderace.png', 85, 120, 'Fire', 205),
    ('Delphox', 'delphox.png', 90, 110, 'Fire', 200),
    ('Pyroar', 'pyroar.png', 95, 115, 'Fire', 210),
    ('Incineroar', 'incineroar.png', 105, 125, 'Fire', 230),
    ('Volcarona', 'volcarona.png', 90, 130, 'Fire', 220),
    ('Quilava', 'quilava.png', 80, 90, 'Fire', 170),
    ('Combusken', 'combusken.png', 85, 95, 'Fire', 180),
    ('Magby', 'magby.png', 75, 80, 'Fire', 155),
    ('Growlithe', 'growlithe.png', 80, 95, 'Fire', 175),
    ('Braixen', 'braixen.png', 85, 100, 'Fire', 185),
    ('Garchomp', 'garchomp.png', 108, 130, 'Ground', 240),
    ('Groudon', 'groudon.png', 120, 150, 'Ground', 270),
    ('Flygon', 'flygon.png', 100, 86, 'Ground', 185),
    ('Excadrill', 'excadrill.png', 95, 135, 'Ground', 230),
    ('Mamoswine', 'mamoswine.png', 150, 130, 'Ground', 280),
    ('Rhyperior', 'rhyperior.png', 115, 140, 'Ground', 255),
    ('Hippowdon', 'hippowdon.png', 110, 112, 'Ground', 220),
    ('Torterra', 'torterra.png', 105, 109, 'Ground', 215),
    ('Krookodile', 'krookodile.png', 92, 117, 'Ground', 210),
    ('Dugtrio', 'dugtrio.png', 100, 70, 'Ground', 170),
    ('Donphan', 'donphan.png', 90, 120, 'Ground', 210),
    ('Claydol', 'claydol.png', 80, 85, 'Ground', 165),
    ('Whiscash', 'whiscash.png', 110, 78, 'Ground', 190),
    ('Steelix', 'steelix.png', 75, 85, 'Ground', 160),
    ('Mudsdale', 'mudsdale.png', 100, 125, 'Ground', 225),
    ('Golurk', 'golurk.png', 89, 124, 'Ground', 215),
    ('Palossand', 'palossand.png', 85, 100, 'Ground', 185),
    ('Camerupt', 'camerupt.png', 70, 120, 'Ground', 190),
    ('Stunfisk', 'stunfisk.png', 109, 81, 'Ground', 190),
    ('Seismitoad', 'seismitoad.png', 105, 95, 'Ground', 200),
    ('Gabite', 'gabite.png', 68, 90, 'Ground', 160),
    ('Trapinch', 'trapinch.png', 50, 100, 'Ground', 150),
    ('Sandshrew', 'sandshrew.png', 60, 75, 'Ground', 135),
    ('Marshtomp', 'marshtomp.png', 70, 85, 'Ground', 155),
    ('Phanpy', 'phanpy.png', 90, 60, 'Ground', 150);